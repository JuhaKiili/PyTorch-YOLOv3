- step:
    name: train model
    image: floydhub/pytorch:1.1.0-gpu.cuda9cudnn7-py3.45
    command:
      - echo $PWD
      - cd /valohai/inputs/training-set-images && unzip train2014-redux.zip
      - mv train2014-redux images
      - cd images && ls $PWD/* > /valohai/inputs/training-set-images/images-list.txt
      - cd /valohai/inputs/training-set-labels && tar -xzf labels.tgz && mv labels /valohai/inputs/training-set-images/labels
      - cd /valohai/repository && pip install -r requirements.txt
      - python3 train.py --data_config config/coco.data
    inputs:
      - name: training-set-images
        default: datum://016d101d-b6e2-6639-c424-4a027ee84f39
      - name: training-set-labels
        default: datum://016d1b71-f37d-1692-7528-efa879b573c6
      - name: training-set-captions
        default: datum://016d101d-4399-b5a5-5373-9925451b8687
      - name: training-set-person-keypoints
        default: datum://016d101c-87e0-ee1f-b4cd-3623c0d88a5c
      - name: training-set-instances
        default: datum://016d1013-97bd-e7a1-7156-baa02fb3e0c8
